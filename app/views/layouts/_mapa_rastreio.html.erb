<div style='width: 640px;'>
  <div id="map" style='height: 300px;'></div> 
</div>     


<script type="text/javascript">

L.mapbox.accessToken = 'pk.eyJ1Ijoicm9tdWxvZGFuemVyIiwiYSI6ImNrZzN4dmdiOTA5czQydnFzNTl0Y3h3MTAifQ.hdv_DUpcRMEzbETwxpNGhA'
var map = L.mapbox.map('map').setView([<%= @posicao.latitude %>, <%= @posicao.longitude %>], 7);

  L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1Ijoicm9tdWxvZGFuemVyIiwiYSI6ImNrZzN4dmdiOTA5czQydnFzNTl0Y3h3MTAifQ.hdv_DUpcRMEzbETwxpNGhA', {
    maxZoom: 18,
    attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
      '<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
      'Imagery © <a href="http://mapbox.com">Mapbox</a>' + ' Desenvolvimento <a href="https://br.linkedin.com/in/romulodanzer">Rômulo Danzer</a>',
    id: 'mapbox.streets' 
  }).addTo(map);

  var redMarker = L.ExtraMarkers.icon({
    icon: 'fa-bell',
    markerColor: 'green',
    shape: 'square',
    prefix: 'fa'
  });

  L.marker([<%= @posicao.latitude %>, <%= @posicao.longitude %>], {icon: redMarker,}).addTo(map);

  map.fitBounds(featureLayer.getBounds());

</script>
